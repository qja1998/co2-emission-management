{"ast":null,"code":"import { ref, computed } from 'vue';\nimport { useStore } from 'vuex';\nimport axios from \"axios\";\nexport default {\n  name: \"progress_dash2\",\n  components: {},\n  setup() {\n    var store = useStore();\n    //날짜 그룹명\n    var user_group = computed(() => store.state.user_group);\n    var selected_company = computed(() => store.state.insight_selected_company);\n    var now = new Date(); // 현재 날짜 및 시간\n    var year = now.getFullYear(); // 년도\n    var month = now.getMonth();\n\n    //서버\n\n    const config = {\n      headers: {\n        Authorization: \"Bearer\" + \" \" + store.state.accessToken\n      }\n    };\n    var getTotalLastData = computed(() => store.state.getTotalLastData);\n    var server_targetTotal_data = computed(() => store.state.getTargetData);\n    var BaseEmissions = computed(() => store.state.baseData);\n    var carbonMoney = ref(250);\n    get_eimmision_now();\n    var increaseEmissionOfBase = BaseEmissions.value - (getTotalLastData.value - server_targetTotal_data.value);\n    var profitMoney = ref(carbonMoney.value * increaseEmissionOfBase);\n    increaseEmissionOfBase = (increaseEmissionOfBase / 1000).toFixed(0);\n    async function get_eimmision_now() {\n      var url = \"/CarbonNature/TradePrice\";\n      await axios.get(url, config).then(res => {\n        carbonMoney.value = res.data;\n      }).catch(error => {}).finally(() => {});\n    }\n    function getAmount() {\n      console.log('새로 고침');\n      get_eimmision_now();\n    }\n    return {\n      carbonMoney,\n      increaseEmissionOfBase,\n      profitMoney,\n      getAmount\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","useStore","axios","name","components","setup","store","user_group","state","selected_company","insight_selected_company","now","Date","year","getFullYear","month","getMonth","config","headers","Authorization","accessToken","getTotalLastData","server_targetTotal_data","getTargetData","BaseEmissions","baseData","carbonMoney","get_eimmision_now","increaseEmissionOfBase","value","profitMoney","toFixed","url","get","then","res","data","catch","error","finally","getAmount","console","log"],"sources":["C:\\Users\\user\\Desktop\\CarbonVueproject\\co2-emission-management\\vueProject\\src\\components\\nature\\progress\\dash2\\dash2.vue"],"sourcesContent":["<template>\r\n    <div> \r\n        <div class=\"title-border\">기준량 대비 탄소배출권 기대효과</div>\r\n        <div class=\"frame\" style=\"width:45vw; height:32.8vh;\">\r\n            <div id=\"profit-left\">\r\n                <img id= \"money_icon\" src=\"@/assets/money.png\">\r\n                <div class=\"dash-text\" id=\"profit-total-text\">{{profitMoney/1000}}<span>천원 이득</span></div>\r\n            </div>\r\n            <div id= \"profit-right\">\r\n                <div class=\"dash-text-middle\" style=\"text-align: left; \">현재 탄소 배출권 시세\r\n                    <img src=\"@/assets/re.png\" id=\"re-amount-btn\"  @click=\"getAmount()\">\r\n                    <div class=\"dash-text-middle dash-text-navy\">{{carbonMoney}}원/1kgco2eq</div>\r\n                </div>\r\n                <div class=\"dash-text-middle\" style=\"text-align: left; margin-top:6vh\">탄소 배출권 계산\r\n                    <div class=\"dash-text-middle dash-text-navy\">{{carbonMoney}}원*{{increaseEmissionOfBase}}Mgco2eq</div>\r\n                </div>\r\n            </div>   \r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {ref, computed} from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport axios from \"axios\";\r\n    export default {\r\n        name :\"progress_dash2\",\r\n        components:{\r\n        },\r\n        setup(){\r\n\r\n            var store =useStore()\r\n            //날짜 그룹명\r\n            var user_group = computed(()=> store.state.user_group)\r\n            var selected_company = computed(()=> store.state.insight_selected_company)\r\n\r\n            var now = new Date();\t// 현재 날짜 및 시간\r\n            var year = now.getFullYear()\t// 년도\r\n            var month = now.getMonth()\r\n\r\n            //서버\r\n            \r\n            const config = {\r\n                headers:{\r\n                    Authorization:\"Bearer\"+\" \"+store.state.accessToken,\r\n                }\r\n            }\r\n            \r\n            var getTotalLastData =  computed(()=> store.state.getTotalLastData)\r\n            var server_targetTotal_data =  computed(()=> store.state.getTargetData)\r\n            var BaseEmissions = computed(()=> store.state.baseData)\r\n\r\n            var carbonMoney = ref(250)\r\n            get_eimmision_now()\r\n            var increaseEmissionOfBase = BaseEmissions.value - (getTotalLastData.value-server_targetTotal_data.value)\r\n            var profitMoney = ref(carbonMoney.value*increaseEmissionOfBase)\r\n\r\n            increaseEmissionOfBase = (increaseEmissionOfBase/1000).toFixed(0)\r\n\r\n            async function get_eimmision_now(){\r\n              var url = \"/CarbonNature/TradePrice\"\r\n       \r\n              await axios.get(url,config).then(res=>{\r\n                    carbonMoney.value = res.data\r\n                  })\r\n                  .catch(error => {\r\n\r\n                  })\r\n                  .finally(()=>{\r\n\r\n              })\r\n            }\r\n\r\n            function getAmount(){\r\n                console.log('새로 고침')\r\n                get_eimmision_now()\r\n            }\r\n            return{\r\n                carbonMoney,\r\n                increaseEmissionOfBase,\r\n                profitMoney,\r\n                getAmount\r\n            }\r\n        }\r\n        \r\n    }\r\n</script>\r\n\r\n<style>\r\n#re-amount-btn{\r\n    margin-left:1vw; \r\n    height:2.5vh\r\n}\r\n#re-amount-btn:hover{\r\n    cursor: pointer;\r\n}\r\n.dash-text-navy{\r\n    text-align: left; \r\n    margin-top:2vh; \r\n    color:#163945; \r\n    font-size:3vh\r\n}\r\n#profit-left{\r\n    width:20vw; \r\n    height: inherit; \r\n    float:left; \r\n    margin-right:3vw;\r\n}\r\n#profit-right{\r\n    float:left; \r\n    margin-top:2vh\r\n}\r\n#money_icon{\r\n    height:16vh; \r\n    margin:4vh 5vw 2vh 5vw;\r\n}\r\n#profit-total-text{\r\n    height:3vh; \r\n    width:inherit; \r\n    text-align: center; \r\n    line-height:3vh;\r\n}\r\n#profit-total-text span{\r\n    font-size:3vh\r\n}\r\n</style>\r\n\r\n\r\n"],"mappings":"AAsBA,SAAQA,GAAG,EAAEC,QAAQ,QAAO,KAAI;AAChC,SAASC,QAAO,QAAS,MAAK;AAC9B,OAAOC,KAAI,MAAO,OAAO;AACrB,eAAe;EACXC,IAAG,EAAG,gBAAgB;EACtBC,UAAU,EAAC,CACX,CAAC;EACDC,KAAKA,CAAA,EAAE;IAEH,IAAIC,KAAI,GAAGL,QAAQ,EAAC;IACpB;IACA,IAAIM,UAAS,GAAIP,QAAQ,CAAC,MAAKM,KAAK,CAACE,KAAK,CAACD,UAAU;IACrD,IAAIE,gBAAe,GAAIT,QAAQ,CAAC,MAAKM,KAAK,CAACE,KAAK,CAACE,wBAAwB;IAEzE,IAAIC,GAAE,GAAI,IAAIC,IAAI,EAAE,EAAE;IACtB,IAAIC,IAAG,GAAIF,GAAG,CAACG,WAAW,EAAC,EAAE;IAC7B,IAAIC,KAAI,GAAIJ,GAAG,CAACK,QAAQ,EAAC;;IAEzB;;IAEA,MAAMC,MAAK,GAAI;MACXC,OAAO,EAAC;QACJC,aAAa,EAAC,QAAQ,GAAC,GAAG,GAACb,KAAK,CAACE,KAAK,CAACY;MAC3C;IACJ;IAEA,IAAIC,gBAAe,GAAKrB,QAAQ,CAAC,MAAKM,KAAK,CAACE,KAAK,CAACa,gBAAgB;IAClE,IAAIC,uBAAsB,GAAKtB,QAAQ,CAAC,MAAKM,KAAK,CAACE,KAAK,CAACe,aAAa;IACtE,IAAIC,aAAY,GAAIxB,QAAQ,CAAC,MAAKM,KAAK,CAACE,KAAK,CAACiB,QAAQ;IAEtD,IAAIC,WAAU,GAAI3B,GAAG,CAAC,GAAG;IACzB4B,iBAAiB,EAAC;IAClB,IAAIC,sBAAqB,GAAIJ,aAAa,CAACK,KAAI,IAAKR,gBAAgB,CAACQ,KAAK,GAACP,uBAAuB,CAACO,KAAK;IACxG,IAAIC,WAAU,GAAI/B,GAAG,CAAC2B,WAAW,CAACG,KAAK,GAACD,sBAAsB;IAE9DA,sBAAqB,GAAI,CAACA,sBAAsB,GAAC,IAAI,EAAEG,OAAO,CAAC,CAAC;IAEhE,eAAeJ,iBAAiBA,CAAA,EAAE;MAChC,IAAIK,GAAE,GAAI,0BAAyB;MAEnC,MAAM9B,KAAK,CAAC+B,GAAG,CAACD,GAAG,EAACf,MAAM,CAAC,CAACiB,IAAI,CAACC,GAAG,IAAE;QAChCT,WAAW,CAACG,KAAI,GAAIM,GAAG,CAACC,IAAG;MAC7B,CAAC,EACAC,KAAK,CAACC,KAAI,IAAK,CAEhB,CAAC,EACAC,OAAO,CAAC,MAAI,CAEjB,CAAC;IACH;IAEA,SAASC,SAASA,CAAA,EAAE;MAChBC,OAAO,CAACC,GAAG,CAAC,OAAO;MACnBf,iBAAiB,EAAC;IACtB;IACA,OAAM;MACFD,WAAW;MACXE,sBAAsB;MACtBE,WAAW;MACXU;IACJ;EACJ;AAEJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}