{"ast":null,"code":"import navigation from \"@/components/Navigation.vue\";\nimport nature_header from \"@/components/nature/Header.vue\";\nimport target_dash1 from \"@/components/nature/target/dash1/dash1.vue\";\nimport target_dash2 from \"@/components/nature/target/dash2/dash2.vue\";\nimport target_dash3 from \"@/components/nature/target/list/dash3.vue\";\nimport addTargetPopup from \"@/components/nature/target/list/addTargetPopup.vue\";\nimport { computed, ref } from 'vue';\nimport { useStore } from 'vuex';\nimport axios from 'axios';\nexport default {\n  name: \"target\",\n  components: {\n    navigation,\n    nature_header,\n    target_dash1,\n    target_dash2,\n    target_dash3,\n    addTargetPopup\n  },\n  setup() {\n    const store = useStore();\n    var group_list = computed(() => store.state.group_list).value;\n    var selected_company = group_list[0];\n    var now = new Date(); // 현재 날짜 및 시간\n    var lastyear = ref(now.getFullYear() - 1); // 년도\n\n    store.commit(\"insight_select_company\", selected_company);\n    var targetPopup = computed(() => store.state.CarbonCategories);\n    async function get_Category_Total_Data() {\n      var url = \"/CarbonNature/Evaluation/\" + selected_company.value;\n      console.log(url);\n      axios.get(url, config).then(res => {\n        console.log('기준년도', res.data);\n        store.commit('getBaseYear', res.data.BaseYear);\n        store.commit('getBaseData', res.data.BaseEmissions);\n      }).catch(error => {\n        console.log(error);\n        store.commit('getBaseYear', 0);\n        store.commit('getBaseData', 0);\n      }).finally(() => {\n        rerender_signal.value += 1;\n      });\n    }\n    const config = {\n      headers: {\n        Authorization: \"Bearer\" + \" \" + store.state.accessToken,\n        \"Content-Type\": \"text/html; charset=euc-kr\"\n      }\n    };\n    async function get_total_data() {\n      var url = \"/CarbonEmission/PartEmission/\" + selected_company.value + \"/\" + lastyear.value + \"-01-01/\" + lastyear.value + \"-12-28/0\";\n      console.log(url);\n      axios.get(url, config).then(res => {\n        console.log('ddd', res.data);\n        store.commit('getTotalLastData', sumfun(res.data));\n        store.commit('getTotalLastDataList', res.data);\n      }).catch(error => {\n        console.log(error);\n      }).finally(() => {\n        rerender_signal.value += 1;\n      });\n    }\n    function sumfun(list) {\n      var sum = ref(0);\n      for (var i = 0; i < list.length; i++) {\n        sum.value = list[i] + sum.value;\n      }\n      return sum.value;\n    }\n    get_total_data();\n    var rerender_signal = ref(0);\n    function change_company() {\n      get_total_data();\n      get_Base_Info();\n      store.commit(\"insight_select_company\", selected_company.value);\n    }\n    return {\n      targetPopup,\n      selected_company,\n      group_list,\n      change_company,\n      rerender_signal\n    };\n  },\n  mounted() {\n    this.rerender_signal += 1;\n  }\n};","map":{"version":3,"names":["navigation","nature_header","target_dash1","target_dash2","target_dash3","addTargetPopup","computed","ref","useStore","axios","name","components","setup","store","group_list","state","value","selected_company","now","Date","lastyear","getFullYear","commit","targetPopup","CarbonCategories","get_Category_Total_Data","url","console","log","get","config","then","res","data","BaseYear","BaseEmissions","catch","error","finally","rerender_signal","headers","Authorization","accessToken","get_total_data","sumfun","list","sum","i","length","change_company","get_Base_Info","mounted"],"sources":["C:\\Users\\user\\Desktop\\CarbonVueproject\\co2-emission-management\\vueProject\\src\\views\\Nature\\carbonNatureTarget.vue"],"sourcesContent":["<template>\r\n    <div class=\"measure-main\">\r\n        <navigation class=\"navigation\"/>\r\n        <div class=\"contents\">\r\n            <nature_header/>\r\n            <div class=\"background\">\r\n                <select class=\"select_group\" v-model=\"selected_company\" @change=\"change_company(selected_company)\">\r\n                  <option v-for=\"item in group_list\" :key=\"item\">{{ item }}</option>\r\n                </select>\r\n                <div class=\"header-page\">탄소 배출량 감축 목표 설정</div>\r\n                <div class=\"dash\">\r\n                    <target_dash1 :key=\"rerender_signal\" id = \"target_dash1\"></target_dash1>\r\n                    <target_dash2 :key=\"rerender_signal\" id = \"target_dash2\"></target_dash2>\r\n                </div>\r\n                <target_dash3 :key=\"rerender_signal\" id = \"target_dash3\"></target_dash3>\r\n            </div>\r\n        </div>\r\n        <addTargetPopup v-if=\"targetPopup==true\" class=\"popup\"></addTargetPopup>\r\n    </div>\r\n    \r\n</template>\r\n\r\n<script>\r\nimport navigation from \"@/components/Navigation.vue\"\r\nimport nature_header from \"@/components/nature/Header.vue\"\r\nimport target_dash1 from \"@/components/nature/target/dash1/dash1.vue\";\r\nimport target_dash2 from \"@/components/nature/target/dash2/dash2.vue\";\r\nimport target_dash3 from \"@/components/nature/target/list/dash3.vue\";\r\nimport addTargetPopup from \"@/components/nature/target/list/addTargetPopup.vue\";\r\nimport { computed , ref} from 'vue';\r\nimport { useStore } from 'vuex'\r\nimport axios from 'axios'\r\nexport default {\r\n    name :\"target\",\r\n    components:{\r\n        navigation,\r\n        nature_header,\r\n        target_dash1,\r\n        target_dash2,\r\n        target_dash3,\r\n        addTargetPopup\r\n    },\r\n    setup() {\r\n        const store = useStore()\r\n\r\n        var group_list = computed(() => store.state.group_list).value\r\n        var selected_company =  group_list[0]\r\n        var now = new Date();\t// 현재 날짜 및 시간\r\n        var lastyear = ref(now.getFullYear()-1)\t// 년도\r\n\r\n        store.commit(\"insight_select_company\", selected_company)\r\n        var targetPopup = computed(() => store.state.CarbonCategories)\r\n\r\n        async function get_Category_Total_Data(){\r\n            var url = \"/CarbonNature/Evaluation/\"+selected_company.value\r\n            console.log(url)\r\n            axios.get(url,config).then(res=>{\r\n                console.log('기준년도',res.data)\r\n                store.commit('getBaseYear',res.data.BaseYear)\r\n                store.commit('getBaseData',res.data.BaseEmissions)\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n                store.commit('getBaseYear',0)\r\n                store.commit('getBaseData',0)\r\n            })\r\n            .finally(()=>{\r\n                rerender_signal.value +=1\r\n            })\r\n        }\r\n        const config = {\r\n            headers:{\r\n                Authorization:\"Bearer\"+\" \"+store.state.accessToken,\r\n                \"Content-Type\": \"text/html; charset=euc-kr\",\r\n            }\r\n        }\r\n\r\n        async function get_total_data(){\r\n            var url = \"/CarbonEmission/PartEmission/\"+selected_company.value+\"/\"+(lastyear.value)+\"-01-01/\"+(lastyear.value)+\"-12-28/0\"\r\n            console.log(url)\r\n            axios.get(url,config).then(res=>{\r\n                console.log('ddd',res.data)\r\n                store.commit('getTotalLastData',sumfun(res.data))\r\n                store.commit('getTotalLastDataList',res.data)\r\n                })\r\n                .catch(error => {\r\n                console.log(error)\r\n                })\r\n                .finally(()=>{\r\n                rerender_signal.value +=1\r\n            })\r\n        }\r\n\r\n        function sumfun(list){\r\n            var sum =ref(0)\r\n            for(var i=0; i<list.length; i++){\r\n                sum.value = list[i] + sum.value\r\n            }\r\n            return sum.value\r\n        }\r\n        get_total_data()\r\n        var rerender_signal = ref(0)\r\n        function change_company(){\r\n            get_total_data()\r\n            get_Base_Info()\r\n            store.commit(\"insight_select_company\", selected_company.value)\r\n        }\r\n        \r\n        return{\r\n            targetPopup,\r\n            selected_company,\r\n            group_list,\r\n            change_company,\r\n            rerender_signal\r\n        }\r\n    },\r\n    mounted(){\r\n        this.rerender_signal +=1\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n .dash{\r\n    margin-top:5vh;\r\n }\r\n#target_dash1{\r\n    float:left;\r\n    display:inline-block;\r\n}\r\n#target_dash2{\r\n    display:inline-block;\r\n    margin-left:2vw;\r\n}\r\n#target_dash3{\r\n    margin-top:5vh;\r\n}\r\n.popup{\r\n    position:fixed;\r\n    margin-left:14.9vw;\r\n}\r\n\r\n\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}