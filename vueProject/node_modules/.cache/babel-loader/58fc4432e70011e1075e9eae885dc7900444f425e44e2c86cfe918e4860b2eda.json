{"ast":null,"code":"import navigation from \"@/components/Navigation.vue\";\nimport evaluation_header from \"@/components/evaluation/Header.vue\";\nimport evaluation_dash1 from \"@/components/evaluation/dash1/dashboard1_evaluation.vue\";\nimport evaluation_dash2 from \"@/components/evaluation/dash2/dash2.vue\";\nimport evaluation_dash3 from \"@/components/evaluation/dash3/dash3.vue\";\nimport evaluation_decreaseList from \"@/components/evaluation/dash4/carbonDecreaseList.vue\";\nimport evaluation_progress from \"@/components/evaluation/dash4/carbonProgress.vue\";\nimport evaluation_scenario from \"@/components/evaluation/dash4/carbonScenario.vue\";\nimport axios from \"axios\";\nimport { useStore } from \"vuex\";\nimport { computed, ref } from \"vue\";\nimport Popup_inputStandard from \"@/components/evaluation/dash2/popup_inputStandard.vue\";\nexport default {\n  name: \"evaluation\",\n  components: {\n    navigation,\n    evaluation_header,\n    evaluation_dash1,\n    evaluation_dash2,\n    evaluation_dash3,\n    evaluation_decreaseList,\n    evaluation_progress,\n    evaluation_scenario,\n    Popup_inputStandard\n  },\n  method: {\n    setInput(standardInput) {\n      this.standardInput = standardInput;\n      console.log('자식 컴포넌드에게 값을 받음 : ', standardInput);\n    }\n  },\n  setup() {\n    const store = useStore();\n    var now = new Date(); // 현재 날짜 및 시간\n    var lastyear = ref(now.getFullYear()); // 년도\n    var group_list = computed(() => store.state.group_list).value;\n    var selected_company = ref(group_list[0]);\n    store.commit(\"SetName\", selected_company.value);\n    var standardInfo = computed(() => store.state.infopage);\n    var rerender_signal = ref(0);\n    const config = {\n      headers: {\n        Authorization: \"Bearer\" + \" \" + store.state.accessToken,\n        \"Content-Type\": \"text/html; charset=euc-kr\"\n      }\n    };\n\n    // 해당 조직의 작년 총 탄소 배출량\n    async function get_total_data() {\n      var url = \"/CarbonEmission/PartEmission/\" + selected_company.value + \"/\" + lastyear.value + \"-01-01/\" + lastyear.value + \"-12-28/0\";\n      axios.get(url, config).then(res => {\n        store.commit('getTotalLastData', sumfun(res.data));\n        store.commit('getTotalLastDataList', res.data);\n      }).catch(error => {\n        console.log(error);\n      }).finally(() => {\n        rerender_signal.value += 1;\n      });\n    }\n    async function get_Base_Info() {\n      var url = \"/CarbonNature/Evaluation/\" + selected_company.value;\n      axios.get(url, config).then(res => {\n        store.commit('getBaseYear', res.data.BaseYear);\n        store.commit('getBaseData', res.data.BaseEmissions);\n        console.log('기준년도', server_evaluation.BaseYear);\n        console.log('기준년도', server_evaluation.BaseEmissions);\n      }).catch(error => {\n        console.log(error);\n        store.commit('getBaseYear', 0);\n        store.commit('getBaseData', 0);\n      }).finally(() => {\n        rerender_signal.value += 1;\n      });\n    }\n\n    //합산 함수\n    function sumfun(list) {\n      var sum = ref(0);\n      for (var i = 0; i < list.length; i++) {\n        sum.value = list[i] + sum.value;\n      }\n      return sum.value;\n    }\n    function change_company() {\n      get_total_data();\n      get_Base_Info();\n      store.commit(\"SetName\", selected_company.value);\n    }\n    return {\n      group_list,\n      selected_company,\n      standardInfo,\n      change_company,\n      get_total_data,\n      get_Base_Info\n    };\n  },\n  mounted() {\n    this.get_total_data(), this.get_Base_Info();\n    this.rerender_signal += 1;\n  }\n};","map":{"version":3,"names":["navigation","evaluation_header","evaluation_dash1","evaluation_dash2","evaluation_dash3","evaluation_decreaseList","evaluation_progress","evaluation_scenario","axios","useStore","computed","ref","Popup_inputStandard","name","components","method","setInput","standardInput","console","log","setup","store","now","Date","lastyear","getFullYear","group_list","state","value","selected_company","commit","standardInfo","infopage","rerender_signal","config","headers","Authorization","accessToken","get_total_data","url","get","then","res","sumfun","data","catch","error","finally","get_Base_Info","BaseYear","BaseEmissions","server_evaluation","list","sum","i","length","change_company","mounted"],"sources":["C:\\Users\\user\\Desktop\\CarbonVueproject\\co2-emission-management\\vueProject\\src\\views\\Neutrality\\evaluationCarbonPreview.vue"],"sourcesContent":["<template>\r\n    <div class=\"measure-main\">\r\n        <navigation class=\"navigation\"/>\r\n        <div class=\"contents\">\r\n          <Popup_inputStandard style=\"position:fixed\" v-if=\"this.standardInfo==true\" @setInput=\"setInput\"></Popup_inputStandard>\r\n            <evaluation_header/>\r\n            <div class=\"background\">\r\n              <div style=\"height:160vh\">\r\n                <select class=\"select_group\" v-model=\"selected_company\" @change=\"change_company(selected_company)\">\r\n                  <option v-for=\"item in group_list\" :key=\"item\">{{ item }}</option>\r\n                </select>\r\n                <span class=\"header-page\">탄소 배출량 평가</span><br>\r\n                <span class=\"subHeader-page\">Carbon Emissions Evaluation</span>\r\n                <div>\r\n                    <span><evaluation_dash1 :key=\"rerender_signal\"/></span>\r\n                    <span>\r\n                      <evaluation_dash2 style=\"margin-left: 3vw;\"></evaluation_dash2>\r\n                    </span>\r\n                    <div>\r\n                      <evaluation_dash3 :key=\"rerender_signal\" style=\"margin-left: 3vw\"></evaluation_dash3>\r\n                    </div>\r\n                </div>\r\n                <div style=\"display: inline-block;\">\r\n                  <evaluation_decreaseList :key=\"rerender_signal\" />\r\n                  <evaluation_progress :key=\"rerender_signal\" style=\"margin-left: 1.4vw\"/>\r\n                  <evaluation_scenario :key=\"rerender_signal\" style=\"margin-left: 1.4vw\"/>\r\n                </div>\r\n              </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  </template>\r\n  \r\n  \r\n  <style>\r\n  .measure-main{\r\n    display: flex;\r\n  }\r\n  .background{\r\n      background:#F7F9FB;\r\n      min-height:86vh;\r\n      height: inherit;\r\n      padding:5vh 2.5vw;\r\n  }\r\n  .header-page{\r\n      color:#5A5A5A;\r\n      font-size:1.5rem;\r\n      font-weight :600;\r\n  }\r\n  .subHeader-page{\r\n      color:#5A5A5A;\r\n      font-size:1rem;\r\n      font-weight:200;\r\n  }\r\n  </style>\r\n  \r\n<script>\r\nimport navigation from \"@/components/Navigation.vue\"\r\nimport evaluation_header from \"@/components/evaluation/Header.vue\"\r\nimport evaluation_dash1 from \"@/components/evaluation/dash1/dashboard1_evaluation.vue\"\r\nimport evaluation_dash2 from \"@/components/evaluation/dash2/dash2.vue\"\r\nimport evaluation_dash3 from \"@/components/evaluation/dash3/dash3.vue\"\r\nimport evaluation_decreaseList from \"@/components/evaluation/dash4/carbonDecreaseList.vue\"\r\nimport evaluation_progress from \"@/components/evaluation/dash4/carbonProgress.vue\"\r\nimport evaluation_scenario from \"@/components/evaluation/dash4/carbonScenario.vue\"\r\nimport axios from \"axios\"\r\nimport { useStore } from \"vuex\"\r\nimport {computed, ref} from \"vue\"\r\nimport Popup_inputStandard from \"@/components/evaluation/dash2/popup_inputStandard.vue\"\r\n\r\n  \r\n  export default {\r\n    name :\"evaluation\",\r\n    components:{\r\n      navigation,\r\n      evaluation_header,\r\n      evaluation_dash1,\r\n      evaluation_dash2,\r\n      evaluation_dash3,\r\n      evaluation_decreaseList,\r\n      evaluation_progress,\r\n      evaluation_scenario,\r\n      Popup_inputStandard\r\n    },\r\n    method: {\r\n      setInput(standardInput){\r\n        this.standardInput = standardInput\r\n        console.log('자식 컴포넌드에게 값을 받음 : ', standardInput)\r\n      }\r\n    },\r\n    setup() {\r\n      const store = useStore();\r\n      var now = new Date();\t// 현재 날짜 및 시간\r\n      var lastyear = ref(now.getFullYear())\t// 년도\r\n      var group_list = computed(() => store.state.group_list).value\r\n      var selected_company = ref(group_list[0])\r\n      store.commit(\"SetName\",selected_company.value)\r\n      var standardInfo = computed(()=>store.state.infopage)\r\n      var rerender_signal = ref(0)\r\n\r\n      \r\n      \r\n      const config = {\r\n          headers:{\r\n              Authorization:\"Bearer\"+\" \"+store.state.accessToken,\r\n              \"Content-Type\": \"text/html; charset=euc-kr\",\r\n          }\r\n      }\r\n\r\n      // 해당 조직의 작년 총 탄소 배출량\r\n      async function get_total_data(){\r\n        var url = \"/CarbonEmission/PartEmission/\"+selected_company.value+\"/\"+(lastyear.value)+\"-01-01/\"+(lastyear.value)+\"-12-28/0\"\r\n        axios.get(url,config).then(res=>{\r\n          store.commit('getTotalLastData',sumfun(res.data))\r\n          store.commit('getTotalLastDataList',res.data)\r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n        })\r\n        .finally(()=>{\r\n          rerender_signal.value +=1\r\n        })\r\n      }\r\n\r\n      async function get_Base_Info(){\r\n        var url = \"/CarbonNature/Evaluation/\"+selected_company.value\r\n        axios.get(url,config).then(res=>{\r\n          store.commit('getBaseYear',res.data.BaseYear)\r\n          store.commit('getBaseData',res.data.BaseEmissions)\r\n          console.log('기준년도',server_evaluation.BaseYear )\r\n        console.log('기준년도',server_evaluation.BaseEmissions )\r\n        })\r\n        .catch(error => {\r\n          console.log(error)\r\n          store.commit('getBaseYear',0)\r\n          store.commit('getBaseData',0)\r\n        })\r\n        .finally(()=>{\r\n          rerender_signal.value +=1\r\n        })\r\n      }\r\n\r\n      \r\n      //합산 함수\r\n      function sumfun(list){\r\n        var sum =ref(0)\r\n        for(var i=0; i<list.length; i++){\r\n            sum.value = list[i] + sum.value\r\n        }\r\n        return sum.value\r\n      }\r\n\r\n      function change_company(){\r\n        get_total_data()\r\n        get_Base_Info()\r\n        store.commit(\"SetName\",selected_company.value)\r\n      }\r\n\r\n      return{\r\n        group_list, selected_company, standardInfo,change_company,get_total_data,get_Base_Info\r\n      }\r\n    },\r\n    mounted(){\r\n        this.get_total_data(),\r\n        this.get_Base_Info()\r\n        this.rerender_signal +=1\r\n      }\r\n  }\r\n </script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}